<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>電影詳細資訊</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body class="detail-body">
<header class="top-nav">
  <div class="logo" onclick="window.location.href='index.html'" style="cursor:pointer;">
    🎬 Movie Explorer
  </div>

  <div class="search-bar">
    <input type="text" id="searchInput" placeholder="搜尋電影..." />
    <button onclick="performSearch()">搜尋</button>

    <div style="width: 1px; height: 20px; background: #374151; margin: 0 12px;"></div>

    <input 
      type="text" 
      id="cmdInput" 
      placeholder="輸入指令..." 
      class="cmd-input-simple"
      autocomplete="off"
    />
  </div>

  <div class="user-actions">
    <button id="loginBtn" onclick="openAuthModal()">登入 / 註冊</button>
    <div id="userInfo" class="hidden" style="display: flex; gap: 10px; align-items: center;">
      <span id="userEmailDisplay" style="font-size: 14px; color: #fb923c;"></span>
      <button onclick="logout()">登出</button>
    </div>
  </div>
</header>

  <main class="detail-container">
    <!-- 上半部：左海報 + 右資訊 -->
    <section class="movie-detail-main">
      <div class="movie-detail-poster">
        <img id="moviePoster" src="" alt="poster">
      </div>
      <div class="movie-detail-info">
        <h1 id="movieTitle"></h1>
        <p id="movieMeta" class="movie-meta-line"></p>
        <p id="movieGenres" class="movie-genres"></p>
        <p id="movieOverview" class="movie-overview"></p>

        <div class="detail-sub-info">
          <p id="movieDirectors"></p>
          <p id="movieRuntime"></p>
          <p id="movieRating"></p>
        </div>

        <h2>主要演員 Top Cast</h2>
        <div id="movieCast" class="scroll-row"></div>
      </div>
    </section>

    <!-- 下半部：相似電影 -->
    <!-- <section class="block">
      <h2>你可能也會喜歡 Similar Movies</h2>
      <div id="similarMovies" class="scroll-row"></div>
    </section> -->
  </main>
<section class="block">
  <h2>📝 觀眾評論 Reviews</h2>
  
  <div id="writeReviewSection" class="sub-block hidden">
    <textarea id="reviewContent" placeholder="寫下你的看法..." style="width: 100%; height: 80px; background: #111; color: #fff; border: 1px solid #333; padding: 8px; border-radius: 4px;"></textarea>
    <div style="margin-top: 8px; display: flex; justify-content: flex-end;">
      <button onclick="submitReview()" class="auth-submit" style="width: auto; padding: 6px 16px;">送出評論</button>
    </div>
  </div>
  
  <p id="loginToReviewHint" class="hint">請先登入以發表評論。</p>

  <div id="reviewsList" style="margin-top: 16px; display: flex; flex-direction: column; gap: 12px;">
    </div>
</section>
  <footer class="footer">
    <p>資料來源：TMDB API（僅作為課程與學習用途）</p>
  </footer>
<div id="personModal" class="modal hidden">
  <div class="modal-content">
    <button class="modal-close" onclick="closePersonModal()">✕</button>
    <div class="modal-body">
      <div class="modal-left">
        <img id="modalPersonPhoto" class="modal-photo" src="" alt="person">
      </div>
      <div class="modal-right">
        <h2 id="modalPersonName"></h2>
        <p id="modalPersonRole" style="color: #f97316; margin-bottom: 10px;"></p>
        <p class="hint">目前僅顯示基本資訊，更多詳細資料需串接人物 API。</p>
      </div>
    </div>
  </div>
</div>
  <script src="auth.js"></script>
  <script src="movie.js"></script>
</body>
<div id="authModal" class="modal hidden">
  <div class="modal-content" style="max-width: 400px;">
    <button class="modal-close" onclick="closeAuthModal()">✕</button>
    
    <div class="auth-tabs" style="display: flex; justify-content: space-around; margin-bottom: 20px; border-bottom: 1px solid #333;">
      <h3 id="tabLogin" onclick="switchTab('login')" style="cursor: pointer; color: #f97316;">登入</h3>
      <h3 id="tabRegister" onclick="switchTab('register')" style="cursor: pointer; color: #9ca3af;">註冊</h3>
    </div>

    <div id="formLogin">
      <input type="email" id="loginEmail" placeholder="電子信箱" class="auth-input">
      <input type="password" id="loginPwd" placeholder="密碼" class="auth-input">
      <button onclick="doLogin()" class="auth-submit">登入</button>
    </div>

    <div id="formRegister" class="hidden">
      <div style="display: flex; gap: 8px;">
        <input type="email" id="regEmail" placeholder="輸入電子信箱" class="auth-input" style="flex: 1;">
        <button onclick="sendVerifyCode()" class="small-btn">傳送驗證碼</button>
      </div>
      <input type="text" id="regCode" placeholder="輸入信箱驗證碼" class="auth-input">
      <input type="password" id="regPwd" placeholder="設定密碼" class="auth-input">
      <button onclick="doRegister()" class="auth-submit">註冊</button>
    </div>
    
    <p id="authMsg" style="color: red; margin-top: 10px; font-size: 14px; text-align: center;"></p>
  </div>
</div>
</html>
