<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>電影詳細資訊</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body class="detail-body">
<header class="top-nav">
  <div class="logo" onclick="window.location.href='index.html'" style="cursor:pointer;">
    🎬 Movie Explorer
  </div>
<div class="search-bar">
      <input
        type="text"
        id="searchInput"
        placeholder="輸入電影/人物名稱（例如：Inception）"
      />
      <button onclick="performSearch()">搜尋</button>

    <div style="width: 1px; height: 20px; background: #374151; margin: 0 12px;"></div>

    <input 
      type="text" 
      id="cmdInput" 
      placeholder="輸入指令..." 
      class="cmd-input-simple"
      autocomplete="off"
    />
  </div>

  <div class="user-actions">
    <button id="loginBtn" onclick="openAuthModal()">登入 / 註冊</button>
    <div id="userInfo" class="hidden" style="display: flex; gap: 10px; align-items: center;">
      <span id="userEmailDisplay" style="font-size: 14px; color: #fb923c;"></span>
      <button onclick="logout()">登出</button>
    </div>
  </div>
</header>

  <main class="detail-container">
    <section class="movie-detail-main">
      <div class="movie-detail-poster">
        <img id="moviePoster" src="" alt="poster">
      </div>
      <div class="movie-detail-info">
        <h1 id="movieTitle"></h1>
        <p id="movieMeta" class="movie-meta-line"></p>
        <p id="movieGenres" class="movie-genres"></p>
        <p id="movieOverview" class="movie-overview"></p>

        <div class="detail-sub-info">
    <p id="movieDirectors"></p>
    <p id="movieRuntime"></p>
    <div style="display: flex; gap: 15px; align-items: center; margin-bottom: 4px;">
        <p id="siteRating" style="margin:0; color: #f97316; font-weight: bold;">本站評分：計算中...</p>
    </div>
</div>

        <h2>主要演員 Top Cast</h2>
        <div id="movieCast" class="scroll-row"></div>
      </div>
    </section>
<section class="block">
  <h2>📝 觀眾評論 Reviews</h2>
  
  <div id="writeReviewSection" class="sub-block hidden">
  <div style="margin-bottom: 10px; display: flex; align-items: center;">
      <label for="reviewScore" style="color: #ccc; margin-right: 10px; font-size: 14px;">評分 (1-10)：</label>
      <select id="reviewScore" style="background: #222; color: #facc15; border: 1px solid #444; padding: 6px 10px; border-radius: 4px; outline: none; font-weight: bold;">
          <option value="10">10</option>
          <option value="9">9</option>
          <option value="8">8</option>
          <option value="7">7</option>
          <option value="6">6</option>
          <option value="5" selected>5</option>
          <option value="4">4</option>
          <option value="3">3</option>
          <option value="2">2</option>
          <option value="1">1</option>
      </select>
  </div>

  <textarea id="reviewContent" placeholder="寫下你的看法..." style="width: 100%; height: 80px; background: #111; color: #fff; border: 1px solid #333; padding: 8px; border-radius: 4px;"></textarea>
  <div style="margin-top: 8px; display: flex; justify-content: flex-end;">
    <button onclick="submitReview(event)" class="auth-submit" style="width: auto; padding: 6px 16px;">送出評論</button>
  </div>
</div>
  
  <p id="loginToReviewHint" class="hint">
  想要發表評論嗎？請先 <a href="javascript:void(0)" onclick="openAuthModal()" style="color: #f97316; text-decoration: underline;">登入會員</a>。
</p>

  <div id="reviewsList" style="margin-top: 16px; display: flex; flex-direction: column; gap: 12px;">
    </div>
</section>
</main>
  <footer class="footer">
    <p>資料來源：TMDB API（僅作為課程與學習用途）</p>
  </footer>
<div id="personModal" class="modal hidden">
  <div class="modal-content">
    <button class="modal-close" onclick="closePersonModal()">✕</button>
    <div class="modal-body">
      <div class="modal-left">
        <img id="modalPersonPhoto" class="modal-photo" src="" alt="person">
      </div>
      
      <div class="modal-right">
        <h2 id="modalPersonName"></h2>
        
        <p id="modalPersonBirth" style="font-size: 13px; color: #9ca3af; margin-bottom: 2px;"></p>
        <p id="modalPersonPlace" style="font-size: 13px; color: #9ca3af; margin-bottom: 8px;"></p>

        <p id="modalPersonRole" style="color: #f97316; margin-bottom: 10px;"></p>
        
        <div id="modalPersonBio" class="bio" style="max-height: 120px; overflow-y: auto; font-size: 14px; color: #ddd; margin-bottom: 15px;"></div>

        <h3 style="font-size: 16px; margin-bottom: 8px; border-top: 1px solid #333; padding-top: 10px;">🎬 出演作品 (Actor)</h3>
        <div id="modalActorMovies" class="scroll-row" style="padding-bottom: 10px; min-height: 100px;"></div>

        <h3 style="font-size: 16px; margin-bottom: 8px; border-top: 1px solid #333; padding-top: 10px;">🎥 執導作品 (Director)</h3>
        <div id="modalDirectorMovies" class="scroll-row" style="padding-bottom: 10px; min-height: 50px;"></div>
      </div>
    </div>
  </div>
</div>
  <script src="auth.js"></script>
  <script src="movie.js"></script>
<div id="authModal" class="modal hidden">
  <div class="modal-content" style="max-width: 400px;">
    <button class="modal-close" onclick="closeAuthModal()">✕</button>
    
    <div class="auth-tabs" style="display: flex; justify-content: space-around; margin-bottom: 20px; border-bottom: 1px solid #333;">
      <h3 id="tabLogin" onclick="switchTab('login')" style="cursor: pointer; color: #f97316;">登入</h3>
      <h3 id="tabRegister" onclick="switchTab('register')" style="cursor: pointer; color: #9ca3af;">註冊</h3>
    </div>

    <div id="formLogin">
  <input type="email" id="loginEmail" placeholder="帳號" class="auth-input">
  
  <div class="pwd-wrapper">
    <input type="password" id="loginPwd" placeholder="密碼" class="auth-input">
    <span id="toggleLoginPwdBtn" class="pwd-eye">👁️</span>
  </div>
  <button onclick="doLogin()" class="auth-submit">登入</button>
</div>

    <div id="formRegister" class="hidden">
  <input type="text" id="regUsername" placeholder="輸入暱稱（顯示於評論）" class="auth-input">
  <input type="email" id="regEmail" placeholder="帳號" class="auth-input">
  
  <div class="pwd-wrapper">
    <input type="password" id="regPwd" placeholder="設定密碼" class="auth-input">
    <span id="togglePwdBtn" class="pwd-eye">👁️</span>
  </div>
  
  <button onclick="doRegister()" class="auth-submit" style="margin-top: 10px;">註冊</button>
</div>
    
    <p id="authMsg" style="color: red; margin-top: 10px; font-size: 14px; text-align: center;"></p>
  </div>
</div>
<div id="cmdModal" class="modal hidden">
  <div class="modal-content" style="max-width: 800px; background: #0f172a; border: 1px solid #334155;">
    <button class="modal-close" onclick="closeCmdModal()">✕</button>
    
    <h3 style="color: #10b981; margin-bottom: 15px; border-bottom: 1px solid #334155; padding-bottom: 10px;">
      💻 指令執行結果
    </h3>
    
    <div style="background: #000; padding: 15px; border-radius: 6px; overflow-x: auto;">
      <pre id="cmdOutput" style="color: #4ade80; font-family: 'Consolas', monospace; font-size: 14px; white-space: pre-wrap; margin: 0;"></pre>
    </div>
    
    <div style="margin-top: 15px; text-align: right;">
        <button onclick="closeCmdModal()" class="small-btn">關閉視窗</button>
    </div>
  </div>
</div>
</body>
</html>